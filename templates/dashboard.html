{% extends "base.html" %}
{% block content %}
<div class="container">
    <div class="nav">
        <div class="logo" style="font-size: 24px; ">
            <b style="color: blueviolet;">Nutz Socio</b>
        </div>
        <div class="nav-links">
            <a href="/create-post">
                Create Post
            </a>
            <a href="/change-password">
                Change Password
            </a>
            <a href="/logout">
                Logout
            </a>
        </div>
    </div>

    <div style="margin: 24px 0;">
        <h2 style="color: #212529; margin-bottom: 16px; font-weight: 600;">
            <b style="color: #495057">Hello, {{ user.username }}!</b><br>
            Dashboard
        </h2>
    </div>

    {% for post in posts %}
    <div class="post {% if not post.is_public %}private{% endif %}">
        <div class="post-header">
            <div class="post-info">
                <div class="avatar">
                    {{ post.author.username[0].upper() }}
                </div>
                <div>
                    <strong style="color: #212529;">{{ post.author.username }}</strong>
                    {% if not post.is_public %}
                        <span style="color: #6c757d; font-size: 12px; margin-left: 8px;">
                            Private
                        </span>
                    {% else %}
                        <span style="color: #6c757d; font-size: 12px; margin-left: 8px;">
                            Public
                        </span>
                    {% endif %}
                    <br>
                    <small style="color: #6c757d;">
                        {{ post.created_at.strftime('%B %d, %Y at %I:%M %p') }}
                    </small>
                </div>
            </div>
            {% if post.user_id == user.id %}
            <form method="post" action="/delete-post/{{ post.id }}" style="margin: 0;" onsubmit="return confirm('Are you sure you want to delete this post?')">
                <button type="submit" class="delete-btn">
                    Delete
                </button>
            </form>
            {% endif %}
        </div>
        <p style="line-height: 1.6; color: #495057;">{{ post.content }}</p>
    </div>
    {% endfor %}

    {% if not posts %}
    <div class="card" style="text-align: center; color: #6c757d;">
        <h3 style="margin-bottom: 8px;">No posts yet</h3>
        <p>Be the first to share something with the community.</p>
        <a href="/create-post" style="color: #495057; text-decoration: none; font-weight: 500;">
            Create your first post â†’
        </a>
    </div>
    {% endif %}
</div>
{% endblock %}